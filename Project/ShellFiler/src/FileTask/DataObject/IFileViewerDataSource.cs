using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Threading;
using ShellFiler.Api;
using ShellFiler.FileSystem;
using ShellFiler.Properties;
using ShellFiler.FileViewer;
using ShellFiler.Locale;
using ShellFiler.Util;

namespace ShellFiler.FileTask.DataObject {

    //=========================================================================================
    // クラス：アクセス可能な形式に操作対象ファイルをラップするオブジェクト
    //=========================================================================================
    public interface IFileViewerDataSource {
        
        //=========================================================================================
        // イベント：データ状態に変化があったことを知らせるイベント
        //=========================================================================================
        event AccessibleFileStatusChangedEventHandler StatusChangedEvent;

        //=========================================================================================
        // 機　能：読み込み済みのバッファを返す
        // 引　数：[out]buffer    バッファのバイト配列を返す変数
        // 　　　　[out]readSize  読み込み済みのサイズを返す変数
        // 戻り値：なし
        //=========================================================================================
        void GetBuffer(out byte[] buffer, out int readSize);

        //=========================================================================================
        // プロパティ：ファイル名のフルパス（null:ファイル以外から読み込み、DisplayNameとDefaultTabは必須）
        //=========================================================================================
        string FilePath {
            get;
        }

        //=========================================================================================
        // プロパティ：対象ファイルがあるファイルシステム（None:ファイルシステム上にない）
        //=========================================================================================
        FileSystemID TargetFileSystem {
            get;
        }

        //=========================================================================================
        // プロパティ：このファイルの表示名（null:ファイル名を使用）
        //=========================================================================================
        string DisplayName {
            get;
        }

        //=========================================================================================
        // プロパティ：保存を推奨するときtrue
        //=========================================================================================
        bool SaveRequired {
            get;
            set;
        }

        //=========================================================================================
        // プロパティ：デフォルトのタブ幅（-1:ファイル名から自動）
        //=========================================================================================
        int DefaultTab {
            get;
        }

        //=========================================================================================
        // プロパティ：解析開始時の最小サイズ（リアルタイムに解析するとき0）
        //=========================================================================================
        int MinParseStartSize {
            get;
        }

        //=========================================================================================
        // プロパティ：デフォルトとして使用するエンコーディング（null:不明のため先頭部分を解析）
        //=========================================================================================
        EncodingType DefaultEncoding {
            get;
        }

        //=========================================================================================
        // プロパティ：ステータス
        //=========================================================================================
        RetrieveDataLoadStatus Status {
            get;
        }

        //=========================================================================================
        // プロパティ：エラー情報
        //=========================================================================================
        string ErrorInfo {
            get;
        }

        //=========================================================================================
        // プロパティ：読み込み用バックグラウンドタスクのID（終了したときBackgroundTaskId.NullId）
        //=========================================================================================
        BackgroundTaskID LoadingTaskId {
            get;
            set;
        }

        //=========================================================================================
        // プロパティ：読み込み時間のターンアラウンドタイム（未設定のとき-1）
        //=========================================================================================
        int LoadingTurnAroundTime {
            get;
            set;
        }

        //=========================================================================================
        // プロパティ：読み込み時間のレスポンスタイム（未設定のとき-1）
        //=========================================================================================
        int LoadingResponseTime {
            get;
            set;
        }
    }
}
